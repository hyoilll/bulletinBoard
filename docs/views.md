# 画面設計

## 画面一覧

| 画面名 | URL | 認証 | 説明 |
|---|---|---|---|
| 投稿一覧 | /posts | 不要 | 投稿をカード形式で表示、カテゴリ＋タイトル検索フィルタ |
| 投稿詳細 | /posts/{id} | 不要 | 投稿本文・コメント・いいね |
| 新規作成フォーム | /posts/create | 必要 | 投稿作成フォーム |
| 投稿編集フォーム | /posts/{id}/edit | 必要（自分のみ） | 投稿編集フォーム |
| コメント編集フォーム | /posts/{id}/comments/{id}/edit | 必要（自分のみ） | コメント編集フォーム |
| ログイン | /login | - | Breeze自動生成 |
| 会員登録 | /register | - | Breeze自動生成 |

---

## レイアウト（layouts/app.blade.php）

- Bootstrap 5 CDN読み込み
- ナビバー：サイト名リンク（/posts）、ログイン済み時はユーザー名＋ログアウト、未ログイン時はログイン・登録リンク
- フラッシュメッセージ表示エリア（`session('success')`, `session('error')`）
- `@yield('content')` でページ本体を差し込み

---

## 1. 投稿一覧（posts/index.blade.php）

**検索フィルタエリア**

```
[ カテゴリ選択 ▼ ] [ タイトルを検索...       ] [ 検索 ]
```

- **カテゴリ選択ボックス**：「すべて（未選択）」＋各カテゴリ名
  - 未選択 → カテゴリによる絞り込みなし（全カテゴリ＋カテゴリなし投稿を対象）
  - カテゴリ選択時 → そのカテゴリの投稿のみ表示（カテゴリなし投稿は非表示）
- **タイトル検索フィールド**：入力テキストで投稿タイトルの部分一致検索（LIKE検索）
- **検索ボタン**：フォームをGETで送信（`/posts?category_id=1&title=foo`）
- 検索条件はページネーション時も維持される（`$posts->appends(request()->query())->links()`）

**投稿一覧エリア**

- 投稿カード（各投稿につき）：
  - タイトル（詳細ページへのリンク）
  - カテゴリ名（あれば）
  - 投稿者名
  - 投稿日時
  - いいね数（♡ アイコン＋件数）
  - コメント数（💬 アイコン＋件数）
- ページネーション
- ログイン済みなら「新規投稿」ボタン（右上など）

---

## 2. 投稿詳細（posts/show.blade.php）

**表示要素**

- 投稿情報：タイトル・カテゴリ（あれば）・投稿者名・投稿日時
- 投稿本文
- 自分の投稿なら「編集」「削除」ボタン
- いいねエリア：
  - いいね数表示
  - ログイン済みなら「いいね」/「いいね済み」ボタン（POST /posts/{id}/likes へのフォーム）
- コメントセクション：
  - コメント一覧（投稿者名・日時・本文）
  - 自分のコメントには「編集」「削除」ボタン
  - ログイン済みならコメント投稿フォーム（本文テキストエリア＋送信ボタン）
  - 未ログイン時はコメントフォームの代わりに「コメントするにはログインが必要です」

---

## 3. 新規作成フォーム（posts/create.blade.php）

**フォーム要素**

- タイトル（テキスト入力、max:255）
- カテゴリ（セレクトボックス、「選択なし」オプションあり）
- 本文（テキストエリア）
- 送信ボタン・キャンセルリンク（一覧へ戻る）

**バリデーションエラー表示**

- 各フィールドの下に `@error('field')` でエラーメッセージ表示
- `old('field')` で入力値を保持

---

## 4. 投稿編集フォーム（posts/edit.blade.php）

- 作成フォームと同じ構成
- `@method('PUT')` を追加
- 既存値が各フィールドに入力済み

---

## 5. コメント編集フォーム（comments/edit.blade.php）

**フォーム要素**

- 本文（テキストエリア）
- 更新ボタン・キャンセルリンク（投稿詳細へ戻る）
- `@method('PUT')`
- `@error('body')` でエラー表示

---

## 共通 UI ルール

- 削除操作は `<form method="POST">` + `@method('DELETE')` + `@csrf` で実装
- 削除ボタンにはJavaScriptの `confirm()` ダイアログで誤操作防止
- `@auth` / `@guest` ディレクティブで認証状態によるUI出し分け
- `@can('update', $post)` ディレクティブでポリシーに基づく表示制御
